<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta charset="utf-8">

        <title>Asterix specifications in structured format - struct</title>

        <link rel="stylesheet" type="text/css" href="./css/default.css" />
        <link rel="stylesheet" type="text/css" href="./css/syntax.css" />

        <meta name="keywords" content="asterix" />
        <meta name="description" content="asterix-specs - asterix specifications in structured format" />
    </head>
    <body>
        <header>
            <div id="logo">
                Asterix specifications
            </div>
            <nav>
                <a href="./index.html">Home</a>
                <a href="./specs.html">Specifications</a>
                <a href="./struct.html">Structure</a>
                <a href="./syntax.html">Syntax</a>
                <a href="./aspecs.html">Aspecs</a>
                <a href="./faq.html">FAQ</a>
                <a href="./source.html">Source</a>
            </nav>
        </header>

        <main role="main">
            <h1 id="asterix-structure">Asterix structure</h1>
<p>Basic principles of asterix are described in the
<a href="https://www.eurocontrol.int/publication/eurocontrol-specification-surveillance-data-exchange-part-i">part 1 document</a>.
This project reuses the definitions and vocabulary to the maximum possible extent.</p>
<h2 id="example">Example</h2>
<figure>
<img src="./images/asterix-example.svg.png" alt="asterix example" />
<figcaption aria-hidden="true">asterix example</figcaption>
</figure>
<h2 id="definition-of-terms">Definition of terms</h2>
<ul>
<li><p><strong>asterix category</strong> is a top-level structure containing complete specification.</p></li>
<li><p><strong>category number</strong> is a number between 0 and 255.</p></li>
<li><p><strong>edition</strong> is a pair of numbers <code>major</code>.<code>minor</code>. <em>Major</em> and <em>minor</em> numbers have no particular meaning
except to determine the order of versions of a category.</p></li>
<li><p><strong>preamble</strong> represents an arbitrary text to describe a category.</p></li>
<li><p><strong>item catalogue</strong> is a list of asterix items which represents the main part of the definition.</p></li>
<li><p><strong>UAP</strong> - user application profile - is ordered selection of items from the <strong>item catalogue</strong>.</p></li>
<li><p><strong>asterix item</strong> - is a basic building block to define asterix structure.</p></li>
<li><p><strong>subitem</strong> - means the same as <strong>item</strong>, but lower in the hierarchical item structure.</p></li>
<li><p><strong>item type</strong> or <strong>variation</strong> - possible variations are: <strong>element</strong>, <strong>compound</strong>, <strong>extended</strong>…</p></li>
<li><p><strong>content</strong> is the interpretation of bits: <strong>raw</strong>, <strong>integer</strong>, <strong>table</strong>…</p></li>
</ul>
<h2 id="abstract-structure">Abstract structure</h2>
<p><strong>Asterix</strong> is a structure containing:</p>
<ul>
<li>category number (Integer)</li>
<li>title (Text)</li>
<li>edition</li>
<li>date</li>
<li>preamble (Text)</li>
<li>catalogue (list of Items)</li>
<li>uap (one or more UAP definitions)</li>
</ul>
<p><strong>Item</strong> is a structure containing:</p>
<ul>
<li>name or item identifier (String, normally short)</li>
<li>title (Text)</li>
<li>definition (Optional Text)</li>
<li>description (Optional Text)</li>
<li>Variation</li>
<li>remark (Optional Text)</li>
</ul>
<p><strong>Item</strong> can also be empty (occupying defined number of spare bits).</p>
<p><strong>Variation</strong> (or <strong>ItemType</strong>) could be:</p>
<ul>
<li>Element (containing number of bits and content definition)</li>
<li>Group (containing list of Items)</li>
<li>Extended (containing list of Items and position of FX bits)</li>
<li>Repetitive (containing number of bytes for the first part and recursive ItemType definition)</li>
<li>Explicit (no further information attached)</li>
<li>Compound (containing list of Items where some items may be missing)</li>
</ul>
<p>Remark:</p>
<blockquote>
<p><strong>Item</strong> and <strong>Variation</strong> are defined in terms of mutual recursion.</p>
</blockquote>
<p><strong>Content</strong> could be:</p>
<ul>
<li><em>Raw</em> value</li>
<li><em>Table</em> of possible values</li>
<li><em>Ascii</em>, <em>ICAO</em> or <em>Octal String</em></li>
<li><em>Signed</em> or <em>Unsigned Integer</em></li>
<li><em>Signed</em> or <em>Unsigned Quantity</em> (including units)</li>
<li><em>BDS</em> register (with or without address)</li>
</ul>
<p>Remark:</p>
<blockquote>
<p>This structure makes distinction between <em>Raw</em> value and <em>Unsigned Integer</em>.
A <em>raw</em> value is a content in which bits do not have any particular meaning,
other than just representing some <em>identifier</em> (this is true in most
cases, for example the <em>SAC/SIC</em> code).</p>
<p><em>Unsigned Integer</em> is similar to <em>Raw</em> value, however semantically there is a
small difference.
In strongly typed environments, the compiler can prevent some irregular
operations over <em>Raw</em> values. For example: it makes no sense to
<em>add/multiply</em> two identifiers, whereas the same arithmetic operations over
<em>unsigned integers</em> are well defined. One example on this is a content that
represents <em>seconds</em>.</p>
</blockquote>
<h2 id="validation-rules">Validation rules</h2>
<p>For each defined item or subitem, the following validation rules are
enforced by the <a href="./aspecs.html">validator</a>:</p>
<ul>
<li>Tables shall not contain duplicated entries.</li>
<li>Each table entry shall contain non-empty description.</li>
<li>Number of element bits must be sufficient for a specified table size,
the table however does not need to be completely defined.</li>
<li>First word in each table row description shall be capitalized (“Like this”).</li>
<li>No dot ‘.’ is expected at the end of row description.</li>
<li>“ascii”, “icao”, “octal” strings shall have (8, 6, 3) bits per
character respectively.</li>
<li>“scaling factor” and number of “fractional bits” are checked if
optimally defined, for example, the scaling factor of “0.5” is
suggested to be redefined as “1” fractional bit, to avoid potential rounding error.</li>
<li>Values with “negative constraints” shall be of “signed” type.</li>
<li>BDS values are expected to be “64” bits long if the address is included or
“56” bits long otherwise.</li>
<li>Defined subitems within each (sub)items shall have non-duplicated names.</li>
<li>Element size must be ‘positive’.</li>
<li>All elements together within a ‘Group’ shall be 8-bit aligned.</li>
<li>A ‘Group’ shall contain more than 1 element
(single element group shall be simplified to just ‘Element’).</li>
<li>Elements sizes within ‘Extended’ item shall be properly bit-aligned
and “a-priory” known.</li>
<li>Extended items shall contain more than one subitem. In the case of
a single subitem (with FX bit), use ‘repetitive fx’.</li>
<li>Repetitive item shall specify a “REP” factor size, which must
be positive and 8-bit aligned.</li>
<li>Repetitive item content shall be 8-bit aligned.</li>
<li>Compound item as a whole shall be 8-bit aligned.</li>
<li>Spare item shall have a positive bit size.</li>
<li>Short item names shall be <code>&lt;= 15</code> character long.</li>
<li>Short item names shall only contain characters “A-Z” and digits “0-9”
(for example “SAC”, “010”, …).</li>
<li>Item title shall be all capitalized (“Like This Example”), see the source
code for some short words exceptions, like “in”, “and”, “of”…</li>
<li>A dot at the end of item title is not expected.</li>
<li>Category number shall be within range <code>[0,255]</code>.</li>
<li>All defined items in a category shall be referenced by the ‘UAP’.</li>
<li>All items referenced by the ‘UAP’ shall be defined.</li>
<li>Top level items (like subitems) shall not be duplicated.</li>
<li>Items listed in UAP shall not be duplicated.</li>
<li>In case of multiple UAPs, each UAP requires a unique name
(example: “plot”, “track” for cat001).</li>
<li>In case of non-context free item definitions, the depending item
shall be defined, for example: the meaning of item
<code>I062/380/IAS/IAS</code> depends on the current value of <code>I062/380/IAS/IM</code>.
The validation requires that <code>I062/380/IAS/IM</code> is also defined and
should be of a fixed size. It is also checked that the number of cases does
not exceed the value that size can represent.</li>
<li>Subitem names shall be non-repetitive, in respect to the parent item name,
for example: “POSITION/POSITIONX” is suggested to change to “POSITION/X”.</li>
</ul>
<h2 id="asterix-definition-in-haskell-syntax">Asterix definition in <code>haskell</code> syntax</h2>
<p>The essence of asterix definition is recursively encoded in <code>Item</code> and it’s <code>Variation</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">CatNum</span> <span class="ot">=</span> <span class="dt">CatNum</span> <span class="dt">Int</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">BitSize</span> <span class="ot">=</span> <span class="dt">BitSize</span> <span class="dt">Int</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">ByteSize</span> <span class="ot">=</span> <span class="dt">ByteSize</span> <span class="dt">Int</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">ItemName</span> <span class="ot">=</span> <span class="dt">ItemName</span> <span class="dt">Text</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">Title</span> <span class="ot">=</span> <span class="dt">Title</span> <span class="dt">Text</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">UapName</span> <span class="ot">=</span> <span class="dt">UapName</span> <span class="dt">Text</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">Unit</span> <span class="ot">=</span> <span class="dt">Unit</span> <span class="dt">Text</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">ItemPath</span> <span class="ot">=</span> <span class="dt">ItemPath</span> [<span class="dt">ItemName</span>]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Documentation</span> <span class="ot">=</span> <span class="dt">Documentation</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    {<span class="ot"> docDefinition  ::</span> <span class="dt">Maybe</span> <span class="dt">Text</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> docDescription ::</span> <span class="dt">Maybe</span> <span class="dt">Text</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> docRemark      ::</span> <span class="dt">Maybe</span> <span class="dt">Text</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Edition</span> <span class="ot">=</span> <span class="dt">Edition</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    {<span class="ot"> editionMajor ::</span> <span class="dt">Int</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> editionMinor ::</span> <span class="dt">Int</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Date</span> <span class="ot">=</span> <span class="dt">Date</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    {<span class="ot"> dateYear  ::</span> <span class="dt">Integer</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> dateMonth ::</span> <span class="dt">Int</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> dateDay   ::</span> <span class="dt">Int</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Number</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">NumInt</span> <span class="dt">Integer</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">NumDiv</span> <span class="dt">Number</span> <span class="dt">Number</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">NumPow</span> <span class="dt">Integer</span> <span class="dt">Integer</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Constrain</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">EqualTo</span> <span class="dt">Number</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">NotEqualTo</span> <span class="dt">Number</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">GreaterThan</span> <span class="dt">Number</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">GreaterThanOrEqualTo</span> <span class="dt">Number</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">LessThan</span> <span class="dt">Number</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">LessThanOrEqualTo</span> <span class="dt">Number</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Signedness</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">Signed</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Unsigned</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">StringType</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">StringAscii</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">StringICAO</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">StringOctal</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">BdsAddr</span> <span class="ot">=</span> <span class="dt">BdsAddr</span> <span class="dt">Int</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">BdsType</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">BdsWithAddress</span>        <span class="co">-- 64 bit value (address is encoded with data)</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">BdsAt</span> (<span class="dt">Maybe</span> <span class="dt">BdsAddr</span>) <span class="co">-- 56 bit value (address is maybe a priory known)</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Content</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">ContentRaw</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">ContentTable</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>        [(<span class="dt">Int</span>, <span class="dt">Text</span>)]</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">ContentString</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        <span class="dt">StringType</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">ContentInteger</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>        <span class="dt">Signedness</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>        [<span class="dt">Constrain</span>]</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">ContentQuantity</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>        <span class="dt">Signedness</span>  <span class="co">-- unsigned/signed</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>        <span class="dt">Number</span>      <span class="co">-- lsb</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>        <span class="dt">Unit</span>        <span class="co">-- unit</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>        [<span class="dt">Constrain</span>]</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">ContentBds</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>        <span class="dt">BdsType</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Rule</span> a</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">ContextFree</span> a</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Dependent</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>        [<span class="dt">ItemPath</span>]   <span class="co">-- items that this rule depends on</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>        a            <span class="co">-- default value</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>        [([<span class="dt">Int</span>], a)] <span class="co">-- cases</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">RepetitiveType</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- N bytes reserved for REP lengt field</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">RepetitiveRegular</span> <span class="dt">ByteSize</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Number of repetitions are defined by FX bit value</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">RepetitiveFx</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">ExplicitType</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">ReservedExpansion</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">SpecialPurpose</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Variation</span> offset</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- leaf of the structure</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">Element</span> offset <span class="dt">BitSize</span> (<span class="dt">Rule</span> <span class="dt">Content</span>)</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- concatinated subitems, example:</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- item 010 is concatinated list of subitems SAC and SIC</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Group</span> offset [<span class="dt">Item</span> offset]</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- extended item with FX extension mechanism</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Extended</span> [<span class="dt">Maybe</span> (<span class="dt">Item</span> offset)]</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- repetitive item</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Repetitive</span> <span class="dt">RepetitiveType</span> (<span class="dt">Variation</span> offset)</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- item with explicit size</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Explicit</span> (<span class="dt">Maybe</span> <span class="dt">ExplicitType</span>)</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- list of subitems with FSPEC mechanism</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Some subitems may not be defined in which case the respective</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- presence bit in the first part is always zero</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Compound</span> [<span class="dt">Maybe</span> (<span class="dt">NonSpare</span> offset)]</span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">NonSpare</span> offset <span class="ot">=</span> <span class="dt">NonSpare</span> <span class="dt">ItemName</span> <span class="dt">Title</span> (<span class="dt">Rule</span> (<span class="dt">Variation</span> offset)) <span class="dt">Documentation</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Item</span> offset</span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">Spare</span> offset <span class="dt">BitSize</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Item</span> (<span class="dt">NonSpare</span> offset)</span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">UapItem</span> a</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">UapItem</span> a</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">UapItemSpare</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">UapItemRFS</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">UapSelector</span> <span class="ot">=</span> <span class="dt">UapSelector</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>    {<span class="ot"> selItem  ::</span> <span class="dt">ItemPath</span>           <span class="co">-- UAP depends on this item</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> selTable ::</span> [(<span class="dt">Int</span>, <span class="dt">UapName</span>)]  <span class="co">-- value lookup table</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a><span class="co">-- User applicaton profile type</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Uap</span> r</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- single UAP</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">Uap</span> r</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- multiple UAPs</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">Uaps</span> [(<span class="dt">UapName</span>, r)] (<span class="dt">Maybe</span> <span class="dt">UapSelector</span>)</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a><span class="co">-- Basic category definition</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Basic</span> <span class="ot">=</span> <span class="dt">Basic</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>    {<span class="ot"> basCategory  ::</span> <span class="dt">CatNum</span></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> basTitle     ::</span> <span class="dt">Title</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> basEdition   ::</span> <span class="dt">Edition</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> basDate      ::</span> <span class="dt">Date</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> basPreamble  ::</span> <span class="dt">Maybe</span> <span class="dt">Text</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> basCatalogue ::</span> [<span class="dt">NonSpare</span> ()]</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> basUap       ::</span> <span class="dt">Uap</span> [<span class="dt">UapItem</span> <span class="dt">ItemName</span>]</span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a><span class="co">-- Expansion category definition</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Expansion</span> <span class="ot">=</span> <span class="dt">Expansion</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>    {<span class="ot"> expCategory  ::</span> <span class="dt">CatNum</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> expTitle     ::</span> <span class="dt">Title</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> expEdition   ::</span> <span class="dt">Edition</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> expDate      ::</span> <span class="dt">Date</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> expFspecSize ::</span> <span class="dt">Maybe</span> <span class="dt">ByteSize</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>    ,<span class="ot"> expItems     ::</span> [<span class="dt">Maybe</span> (<span class="dt">NonSpare</span> ())]</span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Asterix</span></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>    <span class="ot">=</span> <span class="dt">AsterixBasic</span> <span class="dt">Basic</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>    <span class="op">|</span> <span class="dt">AsterixExpansion</span> <span class="dt">Expansion</span></span></code></pre></div>
<p>See <a href="https://github.com/zoranbosnjak/asterix-specs">source code</a>
for exact definition.</p>
<h2 id="non-backward-compatible-changes">Non-backward compatible changes</h2>
<h3 id="expansion-fspec-size">2024-11-07 - expansion fspec size</h3>
<p>Parent git release: <code>#f61aad7</code></p>
<p>Field <code>expFspecSize</code> in the <code>Expansion</code> data type is now optional. This is
required to support REFs where fspec byte size is not fixed, but is using
<code>FX</code> mechanism. An example is ref004, edition 1.4.</p>
<h3 id="cleanup">2024-07-09 - cleanup</h3>
<p>Parent git release: <code>#d3cccd1</code></p>
<ul>
<li>project cleanup</li>
<li>better RFS handling</li>
<li>additional <code>NonSpare</code> type</li>
<li><code>byte size</code> instead of <code>bit size</code>, where applicable</li>
<li>Ast syntax contains only minimal changes</li>
<li>JSON structure follows internal structure and is incompatible
with previous version. A converter script is available for
legacy application (convert from new to old json format).
See <code>migrations/2024-07-cleanup/convertspec.py</code>.</li>
</ul>
<h3 id="generalized-rule">2024-02-26 - generalized ‘Rule’</h3>
<p>Parent git release: <code>#941f5ce</code></p>
<p>The <code>Rule</code> type is extended, to support <code>I004/120/CC</code> content cases.</p>
<p><code>.ast</code> syntax is extended to include ‘default’ value, <code>.json</code> syntax requires
minor update (change in field types and names). See changes in:</p>
<ul>
<li><code>aspecs/lib/Asterix/Specs/Types.hs</code></li>
<li><code>aspecs/lib/Asterix/Specs/Syntax/Ast.hs</code></li>
<li><code>aspecs/lib/Asterix/Specs/Syntax/Json.hs</code></li>
</ul>
<h3 id="precise-numeric-expression">2023-12-18 - precise numeric expression</h3>
<p>Parent git release: <code>#a7c135f</code></p>
<p>The <code>Number</code> type is simplified and generalized, to allow precise
numeric expression, without rounding error. Ast syntax becomes more
readable, for example:</p>
<ul>
<li><code>0.1 0</code> -&gt; <code>1/10</code></li>
<li><code>180 31</code> -&gt; <code>180/2^31</code></li>
</ul>
<p>See <a href="./faq.html">FAQ</a> for expression evaluation details.</p>
<h3 id="extended-item-modification-fx-bit-is-explicit">2023-09-18 - extended item modification, fx bit is explicit</h3>
<p>Parent git release: <code>#53a30f4</code></p>
<p>Extended item structure is simplified to list of items with possible
spare slots (‘fx’ bits).</p>
<h3 id="explicit-item-modification-rfs-item-added">2023-07-24 - explicit item modification, rfs item added</h3>
<p>Parent git release: <code>#5c263cb</code></p>
<p>Explicit item has optional (RE/SP) type added,
such that RE items can be automatically processed.</p>
<p>Rfs item type is introduced.</p>
<h3 id="extendedrepetitve-item-modification">2023-06-20 - extended/repetitve item modification</h3>
<p>Parent git release: <code>#3d75e32</code></p>
<p>Extended items with a single subitem are not allowed.
In those cases, the items are more similar to ‘repetitive’,
but with the ‘fx’ extension mechanism.</p>
<p>New ‘RepetitiveType’ data type is introduced to handle the case.</p>
        </main>

        <footer>
            Updated: 2025-09-29, git revision #f270036.
            Fork this project on <a href="https://github.com/zoranbosnjak/asterix-specs">github</a>.
        </footer>
    </body>
</html>
